<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Stats - LA CHATTE</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f7f7f7; }
    h1 { text-align: center; }
    .controls { display: flex; justify-content: center; gap: 20px; margin-bottom: 30px; }
    canvas { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
  </style>
</head>
<body>
  <h1>Comparateur de Statistiques - LA CHATTE</h1>
  <div class="controls">
    <label>Joueur 1:
      <select id="player1"></select>
    </label>
    <label>Joueur 2:
      <select id="player2"></select>
    </label>
  </div>
  <canvas id="statsChart" width="800" height="400"></canvas>

  <script>
    const data = " + data_json + ";
    const stats = data["Statistique"];
    const players = Object.keys(data).filter(k => k !== "Statistique");

    const select1 = document.getElementById("player1");
    const select2 = document.getElementById("player2");

    players.forEach(player => {
      const opt1 = document.createElement("option");
      opt1.value = opt1.text = player;
      select1.appendChild(opt1);

      const opt2 = document.createElement("option");
      opt2.value = opt2.text = player;
      select2.appendChild(opt2);
    });

    select1.value = players[0];
    select2.value = players[1];

    const ctx = document.getElementById("statsChart").getContext("2d");
    let chart;

    function updateChart() {
      const p1 = select1.value;
      const p2 = select2.value;

      const values1 = data[p1].map(v => parseFloat(v) || 0);
      const values2 = data[p2].map(v => parseFloat(v) || 0);

      if (chart) chart.destroy();
      chart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: stats,
          datasets: [
            {
              label: p1,
              data: values1,
              backgroundColor: "#3e95cd"
            },
            {
              label: p2,
              data: values2,
              backgroundColor: "#8e5ea2"
            }
          ]
        },
        options: {
          responsive: true,
          scales: {
            x: { ticks: { autoSkip: false } },
            y: { beginAtZero: true }
          }
        }
      });
    }

    select1.onchange = updateChart;
    select2.onchange = updateChart;
    updateChart();
  </script>
</body>
</html>
